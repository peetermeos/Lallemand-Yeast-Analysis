\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{longtable}
\usepackage{lscape}

\title{Lallemand Yeast Analysis}
\author{Peeter Meos \\ Liubov Kyaes \\ Tanel Peet \\Ott Keki{\v s}ev}
\date{March 2019}

\begin{document}

\maketitle

\tableofcontents

\section{Introduction}
Quick brown fox...
\subsection{Process Description}
Process description for yeast fermentation goes here with all the steps F1-F8.

\section{Data Preparation}
The time series data describing the process arrived in a form of CSV files. The automation system providing the data had split the data vertically into a number of separate files. That is the variables describing the data are grouped into separate files, with one file consisting the entire length of time series (March - December 2018). The process steps were as follows: F2, F4, F5, F6, F7, F8. Additionally we were given data on three processes: CSep, MO and SP. The automation system collects the data at 10 minute interval, but in the time stamps themselves between the respective CSV files vary within that interval. That is, even though all CSV files for a given process step have the same number of rows, the timestaps for these rows are shifted but remain inside 10 minute window. Therefore we rounded all timestamps to the nearest smaller 10 minute point. That allowed the time stamps to match and data to be merged.

\subsection{Cycle Identification}
The F-process data were time stamped and also enriched with process time field. Therefore it was easy for these process steps to mark the cycles. When the field \texttt{step\_time} was zero, the production line was considered idle. The value change from zero to non-zero was considered as a marker for start of production cycle. Counting cumulatively the number of start markers allowed us to give a sequence number for each production cycle in each F-production step.

\subsection{Labelling}
As extra data we were given labels for 12 production cycles. The labels were titled ''reject'', ''restrict'' and ''release''. In order to know which cycles to label were additionally given production records in a form of PDF files with handwritten notes. A production record contained dates for process steps of F2 and following F4 or F5. We matched manually those dates with our labelling described above. We assumed that the dates in the PDF files marked the \emph{beginning} of the production step. However, in two cases of F2 we were not able to establish that match and picked the \emph{preceding} cycle label in the data. The rationale for that the date was recorded during the cycle and the production itself had started the previous day. This proved again, that manual data recording is inherently inconsistent and error prone. Therefore, one of our recommendations of our short analysis is to preferably automate the process. If the full automation is not possible, the HMI should be developed that ensures the consistency of timestamps in the recorded data. The full set of recommendations are described in more detail in the last section of this report. The cycle numbers in the data with the respective labels are displayed in the table below.

%\begin{tabular}
% Insert the cycle numbers here
%\end{tabular}

\section{Exploratory Data Analysis}
Initally for EDA we concentrated to process steps F2 and F4 since majority of the labelled data was situated there. After completing those we also took a look at F5 and the remaining data sets. The data itself is of acceptable quality with no additional changes necessary. The time series inside a given process step contained, however, various levels of information. Some series were almost exclusively either zero, static, or missing. Since these series do not have at least within this study any explanatory power, we cut these series out. The table below displays the time series that were left to describe each process.

Insert F2 series here
Describe the length of cycle in \texttt{step\_time}

Insert F4 series here
Describe \texttt{step\_time}

Insert F5 series here.
Describe \texttt{step\_time}

\section{Model Development}
\begin{align}
    min \sum_{i \in I}{X_i}    
\end{align}

\section{Feature Engineering}
Analysis of variables based on step times to identify some interruption in data recordings or process.  (parameters collection and representation based on step time and timestamps)

Study of variables. Using multivariate Principal Component Analysis (PCA) method for reducing dimensionality. The method determines the number of principal components and help to identify outliers. The original dataset had a plenty correlated and uncorrelated variables and dimensionality reduction can be a very useful step for visualizing and processing high-dimensional datasets.  PCA was used for data understanding as it allowing most of the variability to be explained using fewer variables.

 PCA was performed in few steps: determining the number of principal components, interpreting each principal component in terms of the original variables and identifying outliers. So, the first step of exploratory analysis was performing preliminary feature selection operations in order to bring the number of variables to a manageable range.
 
 F2, F4, F5 Data Classification.  For prediction a status the Linear Discriminant Analysis (LDA) was applied on PCA-’transformed’ data afterwards. The expectation was, that performing PCA before LDA model should give a little better result. LDA explicitly attempts to model the difference between the classes of data and is used when groups are known a priori.  LDA was run on labelled samples and then applied to unlabeled F2, F4 and F5 data.
 
 Analysis of variables to find out deviations from mean values between status groups. Boxplotting.  Applied on classified dataset (predicted labels/statuses) 

NB. Tools > All data analysis was done in R. PCA was performed using the built-in R functions prcomp(), princomp() and R package factoextra to create the visualization. For LDA there was used R package MASS. 



% Conclusions section
\input{conclusions.tex}

% Recommendations section
\input{recommendations.tex}

\listoffigures

\appendix
% Data description table goes to annex
\input{data.tex}

\end{document}
